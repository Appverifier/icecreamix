<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario | Ice Cream Mix</title>
    <!-- Icon Fonts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css">
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        :root {
            --primary: #FF6B9D;
            --primary-dark: #e85a8b;
            --primary-light: #FFEEF2;
            --text-main: #1F2937;
            --text-secondary: #4B5563;
            --bg-page: #F3F4F6;
            --bg-card: #FFFFFF;
            --border: #E5E7EB;
            --success: #10B981;
            --warning: #F59E0B;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            color: var(--text-main);
            background: var(--bg-page);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Layout */
        .page-wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 250px;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            padding: 2rem 1.5rem;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
            transform: translateX(-100%);
            display: block;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        /* Mobile Header/Menu */
        .mobile-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-card);
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 900;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            align-items: center;
        }

        .sidebar-brand {
            font-weight: 800;
            font-size: 1.25rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: -0.5px;
            margin-bottom: 2rem;
            display: block;
            text-decoration: none;
        }

        .nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        /* Search Bar */
        .search-container {
            display: flex;
            align-items: center;
            background: #F9FAFB;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 2px;
            margin-bottom: 1.5rem;
            transition: all 0.2s;
        }

        .search-container:focus-within {
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .search-container input {
            flex: 1;
            border: none;
            background: transparent;
            padding: 0.6rem 0.75rem;
            font-size: 0.85rem;
            outline: none;
            color: var(--text-main);
            width: 100%;
        }

        .search-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .search-btn:hover {
            background: var(--primary-light);
            color: var(--primary);
        }

        .search-btn.primary {
            color: var(--primary);
        }

        .search-btn svg {
            width: 18px;
            height: 18px;
        }

        #clearSearch {
            display: none;
        }

        .clear-search svg {
            width: 14px;
            height: 14px;
        }

        #noResults {
            display: none;
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-secondary);
            background: white;
            border-radius: 12px;
            border: 1px dashed var(--border);
        }

        /* Responsive Flex Row */
        .info-row {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: #F9FAFB;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .info-row.warning {
            background: #FFF5F7;
            border-color: #FFE4E8;
        }

        .info-row.success {
            background: #F0FDF4;
            border-color: #DCFCE7;
        }

        .info-row.error {
            background: #FEF2F2;
            border-color: #FEE2E2;
        }

        .info-row.status {
            padding: 12px;
            border-radius: 8px;
            gap: 12px;
        }

        @media (max-width: 767px) {
            .info-row.stack-mobile {
                flex-direction: column !important;
                align-items: flex-start !important;
                gap: 1rem !important;
                padding: 1.5rem 1rem !important;
            }

            .info-row.stack-mobile img {
                width: 100% !important;
                max-width: none !important;
                margin-bottom: 0.5rem;
            }

            .info-row:not(.stack-mobile) {
                gap: 1rem !important;
                padding: 1rem !important;
                align-items: start !important;
            }

            .info-row:not(.stack-mobile)>img {
                width: auto !important;
                max-width: 40px !important;
                margin-bottom: 0;
            }

            .info-row>div {
                width: 100%;
            }
        }

        .nav-item {
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 0.75rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--primary-light);
            color: var(--primary-dark);
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 1rem;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }

        /* Typography */
        h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--text-main);
            letter-spacing: -1px;
            line-height: 1.2;
        }

        .lead {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
        }

        h2 {
            font-size: 1.4rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--text-main);
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--text-main);
        }

        /* Cards and Sections */
        .section-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        /* Parameters Grid */
        .params-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
            width: 100%;
        }

        .param-card {
            background: #F9FAFB;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.25rem;
            width: 100%;
        }

        .param-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .param-range {
            font-size: 0.8rem;
            background: #E5E7EB;
            padding: 2px 8px;
            border-radius: 12px;
            color: #374151;
        }

        /* Tips and Callsout */
        .callout {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 4px solid;
            margin-bottom: 1rem;
        }

        .callout-pro {
            background: #F0F9FF;
            border-color: #0284C7;
            color: #0c4a6e;
        }

        .callout-warning {
            background: #FEF3C7;
            border-color: #D97706;
            color: #92400E;
        }

        .screenshot-container {
            text-align: center;
            margin: 2rem 0;
        }

        .app-screenshot {
            max-width: 100%;
            max-height: 500px;
            height: auto;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
        }

        .screenshot-caption {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* Responsive adjustments */
        @media (max-width: 767px) {
            .main-content {
                padding: 1rem;
                overflow-x: hidden;
            }

            .params-grid {
                grid-template-columns: 1fr !important;
            }

            .header-container {
                flex-direction: column;
                align-items: flex-start !important;
                gap: 0.5rem !important;
            }

            .header-container img {
                height: 40px !important;
            }

            .section-card {
                padding: 1.25rem;
                width: 100%;
            }

            ul,
            ol {
                padding-left: 1.25rem;
            }

            img {
                max-width: 100%;
                height: auto;
            }
        }

        @media (min-width: 768px) {
            .sidebar {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 250px;
                padding: 4rem;
            }

            .mobile-header {
                display: none;
            }

            h1 {
                font-size: 2.5rem;
            }

            h2 {
                font-size: 1.75rem;
                margin-top: 3rem;
            }
        }

        /* Icon styles */
        .mdi,
        .feather {
            vertical-align: middle;
            margin-right: 8px;
        }

        /* Ranges Table */
        .ranges-container {
            overflow-x: auto;
            margin: 2rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
        }

        .ranges-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
            font-size: 0.85rem;
            min-width: 800px;
        }

        .ranges-table th {
            background: var(--primary-light);
            color: var(--primary-dark);
            padding: 1rem;
            text-align: left;
            font-weight: 700;
            border-bottom: 2px solid var(--border);
        }

        .ranges-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .ranges-table tr:last-child td {
            border-bottom: none;
        }

        .ranges-table tr:hover {
            background: #F9FAFB;
        }

        .ranges-table .param-name {
            font-weight: 700;
            color: var(--text-main);
            background: #F9FAFB;
            width: 140px;
        }

        .range-value {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            font-weight: 600;
            color: var(--primary);
        }

        .ranges-table .header-helado {
            background: #FFF5F7;
            text-align: center;
        }

        .ranges-table .header-sorbete {
            background: #F0FDFA;
            text-align: center;
        }

        /* Overlay */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 950;
        }

        .overlay.active {
            display: block;
        }
    </style>
</head>

<body>

    <div class="mobile-header">
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <img src="assets/logo.png" style="height: 32px; width: auto;" alt="Logo">
            <a href="#" style="text-decoration: none; color: var(--primary); font-weight: 800; font-size: 1rem;">ICE
                CREAM MIX</a>
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <button class="menu-toggle" id="searchToggle" title="Buscar">
                <i data-feather="search"></i>
            </button>
            <button class="menu-toggle" id="menuToggle">
                <i data-feather="menu"></i>
            </button>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>

    <div class="page-wrapper">
        <!-- Sidebar -->
        <nav class="sidebar">
            <a href="#" class="sidebar-brand" style="display: flex; align-items: center; gap: 0.75rem;">
                <img src="assets/logo.png" style="height: 40px; width: auto;" alt="Logo">
                <span>Ice Cream Mix</span>
            </a>
            <div class="search-container">
                <input type="text" id="manualSearch" placeholder="Buscar temas, ingredientes...">
                <button id="clearSearch" class="search-btn" title="Limpiar">
                    <i data-feather="x"></i>
                </button>
                <button id="searchBtn" class="search-btn primary" title="Buscar">
                    <i data-feather="search"></i>
                </button>
            </div>
            <ul class="nav-list">
                <li class="nav-item"><a href="#intro" class="nav-link active">Introducción</a></li>
                <li class="nav-item"><a href="#calculadora" class="nav-link">Panel de Indicadores</a></li>
                <li class="nav-item"><a href="#maestro" class="nav-link">Maestro Heladero</a></li>
                <li class="nav-item"><a href="#ingredientes" class="nav-link">Mis Ingredientes</a></li>
                <li class="nav-item"><a href="#recetario" class="nav-link">Tu Recetario</a></li>
                <li class="nav-item"><a href="#produccion" class="nav-link">Control de Producción</a></li>
                <li class="nav-item"><a href="#escalado" class="nav-link">Multiplicar Fórmula</a></li>
            </ul>
        </nav>

        <!-- Content -->
        <main class="main-content">
            <div id="noResults">
                <i data-feather="search" style="width: 48px; height: 48px; margin-bottom: 1rem; opacity: 0.3;"></i>
                <p>No se encontraron resultados para tu búsqueda.</p>
                <button
                    onclick="document.getElementById('manualSearch').value=''; document.getElementById('manualSearch').dispatchEvent(new Event('input'));"
                    style="color: var(--primary); background: none; border: none; font-weight: 600; cursor: pointer;">
                    Limpiar búsqueda
                </button>
            </div>

            <section id="intro">
                <h1 style="margin: 0;">Manual de Usuario</h1>
                <p class="lead" style="margin-top: 0.5rem;">Domina la ciencia del helado artesanal con precisión,
                    tecnología y un flujo de trabajo
                    profesional.</p>

                <div class="section-card">
                    <h2>Tu Centro de Control</h2>
                    <p><strong>Ice Cream Mix</strong> ha sido diseñado para que la formulación sea inmediata. La
                        interfaz se divide en un acceso rápido a las funciones más potentes mediante el menú inferior y
                        los accesos directos de la pantalla de inicio.</p>

                    <div class="screenshot-container">
                        <img src="assets/main_screen_new.png" alt="Pantalla de Inicio" class="app-screenshot">
                        <p class="screenshot-caption">Pantalla Principal: Acceso directo a la creación y gestión.</p>
                    </div>

                    <h3>Navegación Eficiente</h3>
                    <p>El menú inferior te permite saltar entre las áreas clave de tu obrador digital en un solo toque:
                    </p>
                    <ul style="margin-bottom: 2rem;">
                        <li><span class="mdi mdi-home-outline" style="color:var(--primary)"></span>
                            Inicio:</strong> Resumen de tu actividad, tips y acceso a ingredientes.</li>
                        <li><span class="mdi mdi-pencil-plus" style="color:var(--primary)"></span>
                            Crear:</strong> El laboratorio central donde diseñas tus fórmulas gramo a gramo.</li>
                        <li><span class="mdi mdi-chef-hat" style="color:var(--primary)"></span>
                            Maestro:</strong> El asistente para generar recetas desde cero.</li>
                        <li><span class="mdi mdi-book-open-variant" style="color:var(--primary)"></span>
                            Recetario:</strong> Tu biblioteca personal de fórmulas guardadas.</li>
                        <li><span class="mdi mdi-cog" style="color:var(--primary)"></span> Ajustes:</strong>
                            Configura tu perfil, preferencias y suscripción.</li>
                    </ul>

                    <div class="params-grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
                        <div class="param-card" style="padding: 1rem;">
                            <img src="assets/main_button_manual.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Crear Manualmente">
                            <p style="font-size: 0.9rem;">Diseña tu receta desde cero con control total sobre cada
                                componente y parámetro técnico.</p>
                        </div>
                        <div class="param-card" style="padding: 1rem;">
                            <img src="assets/main_button_maestro.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Maestro Heladero">
                            <p style="font-size: 0.9rem;">Genera fórmulas equilibradas automáticamente partiendo de un
                                sabor y un tipo de base.</p>
                        </div>
                        <div class="param-card" style="padding: 1rem;">
                            <img src="assets/main_button_ingredients.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;"
                                alt="Gestión de Ingredientes">
                            <p style="font-size: 0.9rem;">Accede directamente a tu base de datos para añadir, escanear o
                                editar tus materias primas.</p>
                        </div>
                        <div class="param-card" style="padding: 1rem;">
                            <img src="assets/main_quick_start.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Inicio Rápido">
                            <p style="font-size: 0.9rem;">Acceso directo a tus Bases Maestras para retomar el trabajo
                                donde lo dejaste.</p>
                        </div>
                        <div class="param-card" style="padding: 1rem;">
                            <img src="assets/main_recents.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Recetas Recientes">
                            <p style="font-size: 0.9rem;">Tus últimas creaciones siempre a mano con indicadores de
                                estado actualizados.</p>
                        </div>
                    </div>

                    <div class="callout callout-pro" style="margin-top: 2rem;">
                        <div style="text-align: center; margin-bottom: 1rem;">
                            <img src="assets/main_tip_card.png"
                                style="width: 100%; max-width: 500px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);"
                                alt="Tip del Maestro">
                        </div>
                        <span class="mdi mdi-lightbulb-on" style="color:#FFB74D;"></span> <strong>Tip del
                            Maestro:</strong> En la pantalla de inicio encontrarás consejos dinámicos que cambian
                        periódicamente. Estos tips cubren desde el equilibrio de sólidos hasta técnicas de maduración
                        para que sigas aprendiendo mientras formulas.
                    </div>
                </div>
            </section>

            <section id="calculadora">
                <h2>1. Panel de Indicadores <span class="mdi mdi-pencil-plus" style="color:var(--primary)"></span></h2>
                <div class="section-card">
                    <p>El laboratorio central de la app. Aquí es donde diseñas tus recetas con control total sobre cada
                        gramo y monitoreas el equilibrio técnico al instante.</p>

                    <div class="screenshot-container">
                        <img src="assets/create_formula_full.png" alt="Pantalla de Nueva Fórmula"
                            class="app-screenshot">
                        <p class="screenshot-caption">Interfaz de Creación: Panel superior de control y área de
                            composición.</p>
                    </div>

                    <h3>El Panel de Indicadores</h3>
                    <p>En la parte superior verás 8 indicadores que se actualizan en <strong>tiempo real</strong>.
                        Entender estas siglas es clave para controlar el resultado final de tu helado. Puedes consultar
                        la <strong>Guía de Rangos Recomendados</strong> más abajo para orientarte sobre los valores
                        óptimos según el tipo de receta:</p>

                    <div class="params-grid">
                        <div class="param-card">
                            <div class="param-title">
                                <img src="assets/indicator_pod.png" style="height: 60px; margin-bottom: 0.5rem;"
                                    alt="POD Indicator">
                                <br>POD (Sensación de Dulzor)
                            </div>
                            <p>Mide cuánto endulza la mezcla. Es clave para el sabor y la palatabilidad.</p>
                            <ul>
                                <li><strong>Bajo:</strong> Helado soso.</li>
                                <li><strong>Alto:</strong> Empalagoso.</li>
                            </ul>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <img src="assets/indicator_pac.png" style="height: 60px; margin-bottom: 0.5rem;"
                                    alt="PAC Indicator">
                                <br>PAC (Poder Anticongelante)
                            </div>
                            <p>Controla la dureza a la temperatura de servicio. Define la estructura del helado.</p>
                            <ul>
                                <li><strong>Bajo:</strong> Helado duro.</li>
                                <li><strong>Alto:</strong> Helado blando.</li>
                            </ul>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <img src="assets/indicator_mg.png" style="height: 60px; margin-bottom: 0.5rem;"
                                    alt="MG Indicator">
                                <br>MG (Materia Grasa)
                            </div>
                            <p>Aporta cremosidad, cuerpo y transmite los sabores de forma equilibrada.</p>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <img src="assets/indicator_st.png" style="height: 60px; margin-bottom: 0.5rem;"
                                    alt="ST Indicator">
                                <br>ST (Sólidos Totales)
                            </div>
                            <p>La suma de todos los componentes secos. Evita cristales de hielo molestos.</p>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <img src="assets/indicator_lpd.png" style="height: 60px; margin-bottom: 0.5rem;"
                                    alt="LPD Indicator">
                                <br>LPD (Sólidos Lácteos)
                            </div>
                            <p>Proteínas y lactosa que dan estructura y ayudan a atrapar el aire (overrun).</p>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <img src="assets/indicator_agua.png" style="height: 60px; margin-bottom: 0.5rem;"
                                    alt="Agua Indicator">
                                <br>AGUA (Contenido H2O)
                            </div>
                            <p>Controla la cantidad de líquido libre. Un exceso crea texturas acuosas.</p>
                        </div>

                        <div class="param-card">
                            <img src="assets/indicator_peso.png" style="height: 40px;" alt="Peso">
                            <p style="font-size: 0.8rem; margin-top: 5px;"><strong>Peso total:</strong> Total de la
                                receta en gramos (formulación recomendada: 1.000 g).</p>
                        </div>
                        <div class="param-card"
                            style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                            <img src="assets/indicator_tp.png" style="height: 60px; margin-bottom: 0.5rem;"
                                alt="TP Indicator">
                            <p style="font-size: 0.8rem; margin-top: 5px;"><strong>Temp. Servicio (TP):</strong> La
                                temperatura ideal estimada para servir este helado.</p>
                        </div>
                    </div>

                    <h3 style="margin-top: 3rem;">Guía de Rangos Recomendados</h3>
                    <p>Para que un helado sea perfecto, sus parámetros deben estar dentro de unos rangos específicos. El
                        Maestro Heladero utiliza estos valores para avisarte de cualquier desequilibrio:
                    </p>

                    <div class="ranges-container">
                        <table class="ranges-table">
                            <thead>
                                <tr>
                                    <th rowspan="2" class="param-name">Parámetro</th>
                                    <th colspan="3" class="header-helado" style="color: var(--primary);">RECETAS BASE
                                        LÁCTEA
                                        (HELADO)</th>
                                    <th colspan="3" class="header-sorbete" style="color: #0D9488;">RECETAS BASE AGUA
                                        (SORBETE)</th>
                                </tr>
                                <tr>
                                    <th style="background: #FFF5F7; font-size: 0.75rem;">PREMIUM</th>
                                    <th style="background: #FFF5F7; font-size: 0.75rem;">MEDIUM</th>
                                    <th style="background: #FFF5F7; font-size: 0.75rem;">BASIC</th>
                                    <th style="background: #F0FDFA; font-size: 0.75rem;">PREMIUM</th>
                                    <th style="background: #F0FDFA; font-size: 0.75rem;">MEDIUM</th>
                                    <th style="background: #F0FDFA; font-size: 0.75rem;">BASIC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="param-name">MG (Grasa)</td>
                                    <td class="range-value">12 - 16%</td>
                                    <td class="range-value">8 - 12%</td>
                                    <td class="range-value">4 - 8%</td>
                                    <td class="range-value">0%</td>
                                    <td class="range-value">0%</td>
                                    <td class="range-value">0%</td>
                                </tr>
                                <tr>
                                    <td class="param-name">LPD (Lácteos)</td>
                                    <td class="range-value">10 - 12%</td>
                                    <td class="range-value">8 - 10%</td>
                                    <td class="range-value">6 - 8%</td>
                                    <td class="range-value">0%</td>
                                    <td class="range-value">0%</td>
                                    <td class="range-value">0%</td>
                                </tr>
                                <tr>
                                    <td class="param-name">POD (Dulzor)</td>
                                    <td class="range-value">17 - 20%</td>
                                    <td class="range-value">16 - 18%</td>
                                    <td class="range-value">14 - 16%</td>
                                    <td class="range-value">25 - 28%</td>
                                    <td class="range-value">22 - 25%</td>
                                    <td class="range-value">20 - 22%</td>
                                </tr>
                                <tr>
                                    <td class="param-name">PAC (Anticong.)</td>
                                    <td class="range-value">240 - 260</td>
                                    <td class="range-value">230 - 250</td>
                                    <td class="range-value">220 - 240</td>
                                    <td class="range-value">300 - 320</td>
                                    <td class="range-value">280 - 300</td>
                                    <td class="range-value">270 - 290</td>
                                </tr>
                                <tr>
                                    <td class="param-name">ST (Sólidos)</td>
                                    <td class="range-value">38 - 42%</td>
                                    <td class="range-value">35 - 38%</td>
                                    <td class="range-value">32 - 35%</td>
                                    <td class="range-value">30 - 32%</td>
                                    <td class="range-value">28 - 30%</td>
                                    <td class="range-value">26 - 28%</td>
                                </tr>
                                <tr>
                                    <td class="param-name">Agua (H2O)</td>
                                    <td class="range-value">58 - 62%</td>
                                    <td class="range-value">60 - 63%</td>
                                    <td class="range-value">63 - 66%</td>
                                    <td class="range-value">68 - 72%</td>
                                    <td class="range-value">70 - 73%</td>
                                    <td class="range-value">72 - 75%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>Composición de la Receta</h3>
                    <div style="text-align: center; margin-bottom: 1.5rem;">
                        <img src="assets/recipe_composition_new.png"
                            style="width: 100%; max-width: 400px; border-radius: 8px; border: 1px solid var(--border);"
                            alt="Composición de Receta">
                    </div>
                    <p>Define los cimientos de tu creación:</p>
                    <ul>
                        <li><strong>Título:</strong> Ponle un nombre único a tu receta.</li>
                        <li><strong>Base:</strong> Elige entre <strong>Helado</strong> (lácteo) o
                            <strong>Sorbete</strong> (agua). Los parámetros ideales cambiarán según esta elección.
                        </li>
                        <li><strong>Calidad:</strong> Define el nivel (Premium, Medium, Basic) para ajustar los rangos
                            de equilibrio aconsejadores.</li>
                        <li><strong>Bases Maestras:</strong> Pulsa este botón (<img src="assets/button_bases.png"
                                style="height: 30px; vertical-align: middle;" alt="Bases Maestras">) para cargar una
                            estructura equilibrada y empezar a modificarla.</li>
                    </ul>

                    <h3>Gestión de Ingredientes</h3>
                    <p>Añade y ajusta tus materias primas con precisión profesional:</p>
                    <div style="display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem;">
                        <div class="info-row">
                            <img src="assets/icon_eye.png" style="width: 32px;" alt="Vista Rápida">
                            <div>
                                <strong>Vista Rápida:</strong> Toca el icono del ojo para ver los parámetros
                                nutricionales (POD, PAC, etc.) de un ingrediente específico sin salir del editor.
                                <br><img src="assets/ingredient_quick_view.png"
                                    style="width: 100%; max-width: 300px; margin-top: 10px; border-radius: 4px; border: 1px solid var(--border);"
                                    alt="Quick View Modal">
                            </div>
                        </div>
                        <div class="info-row error">
                            <img src="assets/icon_trash.png" style="width: 32px;" alt="Eliminar">
                            <div>
                                <strong>Eliminar:</strong> Usa la papelera rosa para quitar ingredientes de la
                                composición al instante.
                            </div>
                        </div>
                    </div>

                    <h3>Barra de Acciones</h3>
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <img src="assets/action_bar.png"
                            style="width: 100%; max-width: 250px; border-radius: 8px; border: 1px solid var(--border);"
                            alt="Action Bar">
                    </div>
                    <p>Bajo los selectores principales tienes accesos rápidos para:</p>
                    <ul>
                        <li><strong>Modo Lista:</strong> Alterna entre la vista de edición y de solo lectura.</li>
                        <li><strong>Normalizar a 1000g:</strong> Ajusta automáticamente todas las cantidades para que el
                            total de tu mezcla sea de 1kg exacto.</li>
                        <li><strong>Deshacer/Rehacer:</strong> ¿Te has equivocado con un gramaje? Vuelve atrás
                            fácilmente.</li>
                    </ul>

                    <h3>Ver Gráfico de Balance</h3>
                    <div style="text-align: center; margin-bottom: 1.5rem;">
                        <img src="assets/balance_button.png" style="width: 100%; max-width: 250px; margin-bottom: 1rem;"
                            alt="Ver Gráfico de Balance">
                        <br>
                        <img src="assets/balance_chart.png"
                            style="width: 100%; max-width: 400px; border-radius: 12px; border: 1px solid var(--border);"
                            alt="Radar de Equilibrio">
                        <p class="screenshot-caption">El radar visual te permite ver de un vistazo si los 6 parámetros
                            clave están dentro de la zona verde (ideal).</p>
                    </div>

                    <h3>Sugerencias del Maestro</h3>
                    <p>Cuando la app detecta un desequilibrio técnico (valores en rosa), el Maestro te ofrecerá
                        soluciones automáticas:</p>
                    <div style="display: flex; flex-direction: column; gap: 1.5rem; margin-top: 1rem;">
                        <div class="info-row warning">
                            <img src="assets/icon_suggestions.png" style="width: 40px; border-radius: 4px;"
                                alt="Icono Sugerencias">
                            <div>
                                <strong>Aviso Flotante:</strong> Verás este icono con un número indicando cuántas
                                sugerencias ha detectado el Maestro. Toca sobre él para abrir las sugerencias.
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <img src="assets/maestro_suggestions_manual.png"
                                style="width: 100%; max-width: 350px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);"
                                alt="Panel Sugerencias">
                            <p class="screenshot-caption">Panel de sugerencias con soluciones para corregir el exceso de
                                POD y PAC.</p>
                        </div>
                    </div>

                    <div class="callout callout-pro" style="margin-top: 2rem;">
                        <strong>Sugerencias:</strong> El Maestro no solo te dice qué está mal, sino qué
                        ingrediente concreto (como la Dextrosa o la Sacarosa) debes reducir o sustituir por otro (como
                        la Maltodextrina) para volver a la zona de equilibrio.
                    </div>
                </div>
            </section>

            <section id="maestro">
                <h2>2. El Maestro Heladero <span class="mdi mdi-chef-hat" style="color:var(--primary)"></span></h2>
                <p>Nuestro sistema avanzado genera recetas equilibradas automáticamente.</p>

                <div class="section-card">
                    <div class="screenshot-container">
                        <img src="assets/maestro_setup_new.png" alt="Configuración Maestro" class="app-screenshot">
                        <p class="screenshot-caption">Elige sabor, base y calidad. El Maestro Heladero hace el resto.
                        </p>
                    </div>

                    <h3>Modos de Formulación</h3>
                    <div class="params-grid" style="margin-bottom: 2rem;">
                        <div class="param-card">
                            <img src="assets/maestro_mode_standard.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;"
                                alt="Formulación Estándar">
                            <p><strong>Estándar:</strong> Algoritmo optimizado para recetas clásicas, asegurando un
                                equilibrio perfecto con ingredientes tradicionales.</p>
                        </div>
                        <div class="param-card">
                            <img src="assets/maestro_mode_pro.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;"
                                alt="Formulación Profesional">
                            <p><strong>Profesional (PRO):</strong> Precisión avanzada para texturas de alta gama, con
                                control exhaustivo de todos los parámetros técnicos.</p>
                        </div>
                    </div>

                    <h3>Configuración de la Fórmula</h3>
                    <div style="display: flex; flex-direction: column; gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="info-row stack-mobile">
                            <img src="assets/maestro_configuration.png"
                                style="width: 100%; max-width: 300px; border-radius: 8px;"
                                alt="Configuración de Parámetros">
                            <div>
                                <p><strong>Sabor y Base:</strong> Define el alma de tu helado. Indica el sabor y
                                    selecciona si es una base láctea o un sorbete base agua.</p>
                                <p><strong>Calidad:</strong> Ajusta los rangos de sólidos y grasas seleccionando entre
                                    calidad Básica, Media o Premium.</p>
                            </div>
                        </div>
                    </div>

                    <h3>Temperatura de Servicio</h3>
                    <p>Una función exclusiva de la <strong>Formulación Profesional</strong>. Indica al Maestro a qué
                        temperatura vas a servir tu helado y él recalculará el PAC (Poder Anticongelante) necesario para
                        que la textura sea perfecta en ese punto exacto.</p>
                    <div class="params-grid" style="margin-bottom: 2rem;">
                        <div class="param-card">
                            <img src="assets/maestro_temp_soft.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Temp Suave">
                            <p><strong>Suave (Vitrina):</strong> Mayor PAC para mantener el helado servible a
                                temperaturas altas (entre <strong>-5°C y -11°C</strong>).</p>
                        </div>
                        <div class="param-card">
                            <img src="assets/maestro_temp_standard.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Temp Estándar">
                            <p><strong>Estándar:</strong> El punto de equilibrio ideal para la mayoría de vitrinas
                                profesionales (entre <strong>-12°C y -17°C</strong>).</p>
                        </div>
                        <div class="param-card">
                            <img src="assets/maestro_temp_hard.png"
                                style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem;" alt="Temp Duro">
                            <p><strong>Duro (Congelador):</strong> Menor PAC para evitar que se vuelva piedra en
                                congeladores domésticos (entre <strong>-18°C y -24°C</strong>).</p>
                        </div>
                    </div>

                    <h3>Generación Inteligente</h3>
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <img src="assets/maestro_generate_button.png"
                            style="width: 100%; max-width: 400px; border-radius: 20px;" alt="Botón Generar">
                        <p style="margin-top: 1rem;">Una vez configurado, el botón <strong>Generar Fórmula</strong>
                            activará el sistema para entregarte una receta pesada y equilibrada lista para usar.</p>
                    </div>

                    <h3>Cómo funciona</h3>
                    <ol>
                        <li>Escribe el sabor deseado (ej: "Chocolate Belga", "Mango y Maracuyá").</li>
                        <li>Elige la <strong>Base</strong> (Agua para sorbetes o Láctea para helados).</li>
                        <li>Selecciona la <strong>Calidad</strong> (Económica, Estándar o Premium).</li>
                        <li>Pulsa "Generar Fórmula" y deja que el Maestro equilibre los parámetros por ti.</li>
                    </ol>
                </div>
            </section>

            <section id="ingredientes">
                <h2>3. Mis Ingredientes (Base de Datos) <i data-feather="database" style="color:var(--primary)"></i>
                </h2>

                <div class="section-card">
                    <h3>Gestión de Ingredientes</h3>
                    <p>Organiza y edita tu despensa digital. Usa el <strong>buscador</strong> superior para encontrar
                        rápidamente cualquier producto.</p>

                    <div class="screenshot-container">
                        <img src="assets/ingredients_list.png" alt="Lista de Ingredientes" class="app-screenshot">
                        <p class="screenshot-caption">Base de datos de ingredientes.</p>
                    </div>

                    <div style="text-align: center; margin: 1.5rem 0;">
                        <img src="assets/ingredients_filter.png" alt="Filtros de Ingredientes"
                            style="width: 100%; max-width: 450px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">Filtra rápidamente entre los
                            ingredientes del sistema y tus creaciones personales.</p>
                    </div>

                    <ul>
                        <li><span
                                style="background:#E5E7EB; color:#374151; padding:2px 8px; border-radius:12px; font-size:0.85em; font-weight:600;">Sistema</span>
                            <strong>Ingredientes Pre-cargados:</strong> Base de datos verificada con los productos más
                            comunes.
                        </li>
                        <li><span
                                style="background:#FCE7F3; color:#BE185D; padding:2px 8px; border-radius:12px; font-size:0.85em; font-weight:600;">Míos</span>
                            <strong>Tus Ingredientes:</strong> Los que tú has añadido manualmente o escaneado.
                        </li>
                    </ul>
                    <p><em>Nota: Puedes pulsar en cualquier ingrediente para editar sus valores si lo necesitas.</em>
                    </p>

                    <h3 style="margin-top: 2rem; border-top: 1px solid var(--border); padding-top: 1.5rem;">Añadir Nuevo
                        Ingrediente</h3>
                    <p>Personaliza tu base de datos con tus propios productos. Pulsa el botón <strong>"Crear
                            Nuevo"</strong> para comenzar:</p>

                    <div style="text-align: center; margin-bottom: 2rem;">
                        <img src="assets/ingredients_add_button.png" alt="Botón Crear Nuevo"
                            style="width: 100%; max-width: 400px; border-radius: 20px;">
                    </div>

                    <div class="screenshot-container">
                        <img src="assets/new_ingredient_methods.png" alt="Métodos de creación de ingredientes"
                            class="app-screenshot">
                        <p class="screenshot-caption">Elige el método que mejor se adapte a ti.</p>
                    </div>

                    <div class="params-grid"
                        style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); margin-bottom: 2rem;">
                        <div class="param-card">
                            <div class="param-title">
                                <span><i data-feather="edit-2"></i> Manual</span>
                            </div>
                            <p style="font-size: 0.9rem">Introduce los valores POD, PAC y demás parámetros a mano.</p>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <span><i data-feather="camera"></i> Escanear</span>
                            </div>
                            <p style="font-size: 0.9rem">Usa la cámara para leer la etiqueta y calcula automáticamente
                                los valores.</p>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <span><i data-feather="image"></i> Importar</span>
                            </div>
                            <p style="font-size: 0.9rem">Sube una foto de la tabla nutricional desde tu galería.</p>
                        </div>

                        <div class="param-card">
                            <div class="param-title">
                                <span><i data-feather="sliders"></i> Conversor</span>
                            </div>
                            <p style="font-size: 0.9rem">Calcula valores desde una tabla nutricional estándar.</p>
                        </div>
                    </div>

                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 2rem;">
                        <div>
                            <h4>Creación Manual</h4>
                            <p>Ideal si ya tienes la ficha técnica del producto. Completa los campos de POD, PAC,
                                Materia Grasa, Sólidos y Lactosa.</p>
                            <img src="assets/ingredients_custom_updated.png" alt="Formulario Manual"
                                style="width: 100%; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-top: 1rem;">
                        </div>
                        <div>
                            <h4>Conversor de Tabla Nutricional</h4>
                            <p>Si solo tienes la etiqueta del supermercado, introduce los valores por cada 100g y el
                                sistema estimará los parámetros técnicos.</p>
                            <img src="assets/ingredients_converter_updated.png" alt="Conversor Nutricional"
                                style="width: 100%; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-top: 1rem;">
                        </div>
                    </div>
                </div>

                <section id="recetario">
                    <h2>4. Tu Recetario <img src="assets/recipe_book_icon.png" alt="Icono Recetario"
                            style="height: 28px; width: auto; vertical-align: middle; margin-left: 8px;"></h2>
                    <div class="section-card">
                        <div class="screenshot-container">
                            <img src="assets/recipe_book_new.png" alt="Recetario" class="app-screenshot">
                            <p class="screenshot-caption">Gestión inteligente de recetas con estados de producción en
                                tiempo
                                real.</p>
                        </div>
                        <p>Guarda tus creaciones favoritas, duplícalas para hacer variaciones o compártelas como PDF.
                        </p>

                        <div class="callout callout-pro">
                            <strong>Selección en Lote:</strong> Activa el modo de selección (<span
                                class="mdi mdi-checkbox-marked-outline"></span>) para borrar o marcar varios favoritos a
                            la
                            vez. ¡Usa el botón <strong>"Todo"</strong> para seleccionarlos todos instantáneamente!
                        </div>

                        <h4 style="margin-top: 1.5rem;">Acciones Rápidas</h4>
                        <p>Cada receta en tu recetario tiene botones de acción rápida:</p>
                        <ul>
                            <li><span class="mdi mdi-clipboard-check-outline" style="color:#4B5563;"></span>
                                <strong>Control
                                    de Producción:</strong> Inicia una sesión de Pasteurización, Enfriamiento,
                                Maduración o
                                Mantecado directamente
                                desde la tarjeta.
                            </li>
                            <li><span class="mdi mdi-bell-plus-outline" style="color:#4B5563;"></span> <strong>Alarma de
                                    Maduración:</strong> Programa un recordatorio para cuando tu mezcla esté lista.</li>
                            <li><span class="mdi mdi-star-outline" style="color:#4B5563;"></span>
                                <strong>Favoritos:</strong> Marca
                                tus recetas más usadas para encontrarlas rápido.
                            </li>
                            <li><span class="mdi mdi-content-copy" style="color:#FF6B9D;"></span>
                                <strong>Duplicar:</strong>
                                Crea una copia para experimentar sin perder la original.
                            </li>
                            <li><span class="mdi mdi-trash-can-outline" style="color:#EF4444;"></span>
                                <strong>Eliminar:</strong> Borra
                                las recetas que ya no necesites.
                            </li>
                        </ul>

                        <h5 style="margin-top: 1.5rem; margin-bottom: 0.75rem; font-size: 0.95rem;">Estados de la Alarma
                        </h5>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 1.5rem;">
                            <div class="info-row status" style="background: #FFF8E1; border-left: 4px solid #FFB74D;">
                                <span class="mdi mdi-bell-ring" style="font-size: 24px; color: #FFB74D;"></span>
                                <div>
                                    <strong style="color: #E65100;">Madurando</strong>
                                    <p style="margin: 0; font-size: 0.9rem; color: #5D4037;">La maduración está en
                                        proceso.
                                        Verás el tiempo restante en la tarjeta.</p>
                                </div>
                            </div>
                            <div class="info-row status" style="background: #E8F5E9; border-left: 4px solid #4CAF50;">
                                <span class="mdi mdi-bell-ring" style="font-size: 24px; color: #4CAF50;"></span>
                                <div>
                                    <strong style="color: #1B5E20;">Madurado</strong>
                                    <p style="margin: 0; font-size: 0.9rem; color: #2E7D32;">¡La maduración se ha
                                        completado! Tu mezcla está lista para mantecar.</p>
                                </div>
                            </div>
                            <div class="info-row status" style="background: #F5F5F5; border-left: 4px solid #9E9E9E;">
                                <span class="mdi mdi-bell-plus-outline" style="font-size: 24px; color: #4B5563;"></span>
                                <div>
                                    <strong style="color: #4B5563;">Sin alarma</strong>
                                    <p style="margin: 0; font-size: 0.9rem; color: #616161;">Esta receta no tiene alarma
                                        asignada. Toca para programar una.</p>
                                </div>
                            </div>
                        </div>

                        <h4 style="margin-top: 1.5rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                            <span class="mdi mdi-bell-ring" style="color:#FFB74D;"></span> Alarma de Maduración
                        </h4>
                        <p>La maduración es el tiempo de reposo en frío (2-4°C) que necesita tu mezcla para hidratar
                            proteínas y estabilizantes. Desde el Recetario puedes programar alarmas para no olvidarte de
                            mantecar.</p>

                        <div class="screenshot-container">
                            <img src="assets/maturation_alarm_new.png" alt="Alarma de Maduración"
                                class="app-screenshot">
                            <p class="screenshot-caption">Configura alarmas con tiempos predeterminados o
                                personalizados.
                            </p>
                        </div>



                        <div class="params-grid" style="grid-template-columns: 1fr 1fr; margin-top: 1rem;">
                            <div class="param-card" style="border-left: 4px solid #4ECDC4;">
                                <div class="param-title">
                                    <span><span class="mdi mdi-ice-cream" style="color:#4ECDC4;"></span> Helado</span>
                                </div>
                                <p style="margin-bottom: 0.5rem;"><strong>Mínimo:</strong> 4 horas</p>
                                <p style="margin-bottom: 0.5rem;"><strong style="color:#4ECDC4;">Óptimo:</strong> 8-12
                                    horas
                                </p>
                                <p style="margin-bottom: 0;"><strong>Máximo:</strong> 72 horas</p>
                            </div>
                            <div class="param-card" style="border-left: 4px solid #FF6B6B;">
                                <div class="param-title">
                                    <span><span class="mdi mdi-fruit-pineapple" style="color:#FF6B6B;"></span>
                                        Sorbete</span>
                                </div>
                                <p style="margin-bottom: 0.5rem;"><strong>Mínimo:</strong> 2 horas</p>
                                <p style="margin-bottom: 0.5rem;"><strong style="color:#FF6B6B;">Óptimo:</strong> 4-6
                                    horas
                                </p>
                                <p style="margin-bottom: 0;"><strong>Máximo:</strong> 24-48 horas</p>
                            </div>
                        </div>

                        <div class="callout callout-pro" style="margin-top: 1rem;">
                            <strong>Barra de Progreso:</strong> Mientras la alarma está activa, verás una barra de
                            progreso
                            y el estado de maduración directamente en la tarjeta de la receta (MADURANDO, PUNTO ÓPTIMO o
                            MADURADO).
                        </div>

                    </div>
                </section>

                <section id="produccion">
                    <h2>5. Control de Producción <span class="mdi mdi-clipboard-check-outline"
                            style="color:var(--primary)"></span></h2>
                    <div class="section-card">
                        <h3>Procesos Personalizados</h3>
                        <p>Optimiza tu flujo de trabajo configurando procesos para cada receta. Accede pulsando el icono
                            de
                            portapapeles (<span class="mdi mdi-clipboard-play-outline"></span>) en la tarjeta de
                            cualquier
                            receta.</p>

                        <div class="screenshot-container">
                            <img src="assets/production_control.png" alt="Control de Producción" class="app-screenshot">
                            <p class="screenshot-caption">Configura los tiempos de Pasteurización, Enfriamiento,
                                Maduración
                                y Mantecado.</p>
                        </div>

                        <h3>Seguimiento en Tiempo Real</h3>
                        <p>Una vez iniciado un proceso, aparecerá una <strong>barra de progreso</strong> directamente en
                            la
                            tarjeta de la receta para que puedas monitorear el estado sin entrar en el detalle.</p>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1.5rem;">
                            <div style="text-align: center;">
                                <img src="assets/progress_pasteurization.png"
                                    style="width: 100%; border-radius: 8px; border: 1px solid var(--border);"
                                    alt="Progreso Pasteurización">
                                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">Fase de
                                    Calor (Naranja)</p>
                            </div>
                            <div style="text-align: center;">
                                <img src="assets/progress_cooling.png"
                                    style="width: 100%; border-radius: 8px; border: 1px solid var(--border);"
                                    alt="Progreso Enfriamiento">
                                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">Fase de
                                    Frío
                                    (Azul)</p>
                            </div>
                            <div style="text-align: center;">
                                <img src="assets/progress_maturation.png"
                                    style="width: 100%; border-radius: 8px; border: 1px solid var(--border);"
                                    alt="Progreso Maduración">
                                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">Fase de
                                    Reposo (Amarillo)</p>
                            </div>
                            <div style="text-align: center;">
                                <img src="assets/progress_mantecado.png"
                                    style="width: 100%; border-radius: 8px; border: 1px solid var(--border);"
                                    alt="Progreso Mantecado">
                                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">Fase de
                                    Turbinado (Verde)</p>
                            </div>
                        </div>

                        <div class="callout callout-pro">
                            <strong>Tip:</strong> Recibirás notificaciones cuando cada fase termine para que tu
                            producción
                            no se detenga.
                        </div>

                        <h3 style="margin-top: 2rem; border-top: 1px solid var(--border); padding-top: 1.5rem;">¿Qué es
                            el
                            Overrun?</h3>
                        <p>Es la cantidad de aire que incorporas a tu helado durante el mantecado. El aire es clave para
                            una
                            textura suave.</p>

                        <div class="screenshot-container">
                            <img src="assets/overrun.png" alt="Calculadora de Overrun" class="app-screenshot">
                            <p class="screenshot-caption">Mide el rendimiento real de tu mantecadora introduciendo el
                                peso
                                de la mezcla y del helado terminado.</p>
                        </div>

                        <div class="callout callout-warning">
                            <strong>Objetivo:</strong> Un helado artesanal suele tener entre <strong>30-40%</strong> de
                            Overrun.
                        </div>
                    </div>
                </section>

                <section id="escalado">
                    <h2>6. Multiplicar Fórmula <i data-feather="maximize-2" style="color:var(--primary)"></i></h2>
                    <div class="section-card">
                        <p>¿Tienes una receta perfecta para 1kg pero necesitas producir 50kg? No uses la calculadora a
                            mano.
                        </p>

                        <div class="screenshot-container">
                            <img src="assets/multiplier.png" alt="Multiplicar Fórmula" class="app-screenshot">
                            <p class="screenshot-caption">Convierte tu receta a producción industrial en un click.</p>
                        </div>

                        <h3>Pasos:</h3>
                        <ol>
                            <li>Entra en tu fórmula guardada en el Recetario.</li>
                            <li>Pulsa la opción <strong>"Multiplicar Fórmula"</strong>.</li>
                            <li>Usa los <strong>botones rápidos (x2, x3, x4, x5)</strong> para multiplicar al instante.
                            </li>
                            <li>O introduce manualmente el <strong>Peso Total Objetivo</strong> (ej: 5000g).</li>
                            <li>La app recalculará instantáneamente todos los ingredientes manteniendo el equilibrio
                                perfecto.</li>
                        </ol>
                    </div>
                </section>

        </main>
    </div>

    <script>
        // Initialize Feather icons
        feather.replace();

        // Mobile Menu Toggle
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.getElementById('overlay');
        const navLinks = document.querySelectorAll('.nav-link');

        function toggleMenu() {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        menuToggle.addEventListener('click', toggleMenu);
        overlay.addEventListener('click', toggleMenu);

        // Close menu when a link is clicked
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 768) {
                    toggleMenu();
                }
            });
        });

        // Simple active state observer
        const sections = document.querySelectorAll('section');
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.3
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${entry.target.id}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => observer.observe(section));

        // Search Functionality
        const searchInput = document.getElementById('manualSearch');
        const clearSearch = document.getElementById('clearSearch');
        const searchBtn = document.getElementById('searchBtn');
        const searchToggle = document.getElementById('searchToggle');
        const noResults = document.getElementById('noResults');

        function performSearch(shouldScroll = true, shouldCloseMenu = false) {
            const term = searchInput.value.toLowerCase().trim();
            const words = term.split(/\s+/).filter(w => w.length > 0);
            let hasResults = false;

            clearSearch.style.display = term ? 'flex' : 'none';

            sections.forEach(section => {
                const text = section.innerText.toLowerCase();
                const sectionId = section.getAttribute('id');
                const navLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);

                const matches = words.length === 0 || words.every(word => text.includes(word));

                section.style.display = matches ? 'block' : 'none';
                if (navLink && navLink.parentElement) {
                    navLink.parentElement.style.display = matches ? 'block' : 'none';
                }

                if (matches) hasResults = true;
            });

            noResults.style.display = hasResults ? 'none' : 'block';

            if (shouldScroll && term !== "") {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            if (shouldCloseMenu && window.innerWidth < 768 && sidebar.classList.contains('open')) {
                toggleMenu();
            }
        }

        searchInput.addEventListener('input', () => {
            performSearch(false, false);
        });

        searchBtn.addEventListener('click', () => performSearch(true, true));

        clearSearch.addEventListener('click', () => {
            searchInput.value = '';
            performSearch(false, false);
            searchInput.focus();
        });

        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') performSearch(true, true);
        });

        if (searchToggle) {
            searchToggle.addEventListener('click', () => {
                if (!sidebar.classList.contains('open')) {
                    toggleMenu();
                }
                setTimeout(() => searchInput.focus(), 300);
            });
        }
    </script>
</body>

</html>